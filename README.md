# cvvc_generator
对粤语会是一个更好的用于生成cvvc录音表和oto的吐表机？

can_cvvc.txt是字典文件，cvvc_reclist_generator.py是吐表机的代码

**请注意这是一个录音方案没有经过测试的吐表机（自带的字典文件是粤语，拼音方案是粤拼）**
**连我自己都没有测试过！（指完整地录一遍全音素进行测试，所以这并不算正式配布就是丢在这里）**
**所以，有人拿这个来生成录音表就真的是，小白鼠了！**
**但是如果有小白鼠的话，希望可以联系探讨一下oto制作已经录音指北，真的本人对这俩一窍不通简直害人**

-------------------------------------------------------------
**2020/11/16第二次更新：**
1. 修正了组式录音方案的逻辑错误（ABBA部分修正为ABBA或AABB）
2. 增加了一个一调整窗口大小就会露馅的勉强能用的gui
3. 修正了使用OneJazz录音bgm时的oto整体偏移量错误
 
-------------------------------------------------------------
**2020/11/08第一次更新：**
1. 将入声修改表示为stop_coda
2. 修正了cv cv可能缺失的bug
3. 修改了当行字数为奇数时末尾会舍弃一个空位的浪费行为


## 字典文件
该字典是为了方便生成更好的oto模板用的特殊的字典（不同于一般cvvc的presamp.ini）
该字典主要分为6列，分别为：整音，辅音，半音，韵尾，辅音速度，韵尾速度，列与列之间用半角逗号分隔
半音是指从辅音开始到稳定的韵腹为止这样的整音的一部分， 如baai的半音是baa
两个速度的默认bpm为120，其中的韵尾速度是从韵腹开始向韵尾变化的那一刻，到下一个音的辅音前的一段区间（这样定义是为了兼容入声，但其实我也不知道这样搞对不对
目前两个速度都是**我个人的情况，不一定符合好的录音要求，请各位自行斟酌判断**

## 吐表机
用于生成录音表和oto的吐表机，都尽量写了注释了（中文注释大欢喜？
用的时候（如果有的话？）先创建一个ReclistGenerator实例，再依次调用read_dict，gen_cvvc_relist，gen_oto和output_list这几个函数，就可以得到一个录音表和对应的oto文件了
**如果你看到没有像科林吐表机那样的傻瓜式生成方法，说明这个东东还不是可以大大方方拿出手的东西，是beta版本啊！！！**
如果你看懂了知道怎么用那么一下是推荐的gen_cvvc_relist参数**（请认真考虑是否愿意花费时间去录一个可能会报废的beta）：**
1. 如果是想要录全音素的话，那么推荐plan_b=True，group=True，random=False，其余默认
2. 如果不想要开头音，那么推荐group=True，random=False，其余默认
以上的推荐参数会生成一个绝大多数行都是有一定规律的比较好读的6字表（本人表示读粤拼真的会结巴

## 关于group参数
虽然函数注释有写不过这边还是稍微说一下，就是每两个音（A，B）组成一组，逐渐以AABBA，ABBA和ABA(CDC)的方式组成录音行的一种录音形式，比如现在有两个音baa和caai，其有两个不同的辅音和韵尾，那么可以形成的vc部就应该是2\*2=4，如果四个vc都没有被收录，那就会组成一行AABBA形式的录音行，即_baa_baa_caai_caai_baa；如果有一个vc被收录了，假设为aa b，那么就会组成一行ABBA形式的录音行，即_baa_caai_caai_baa；如果有两个vc被收录了，假设为aa b和aai c，那么就会形成ABA形式的录音行，即_baa_caai_baa
以上就是基本思路，经过这样的分组成行可以稍微提高可读性和整音的利用率（即平均读一个字能出多少个oto）粤语的话经过不严谨的测试同样的oto数出来的6字表可以比科林的吐表机少70行左右（应该？错了的话请及时找我修正以及提前对科林说对不起！
使用该参数生成的录音表如果你想的话可以叫cc组式CVVC录音表，但如果**有使用参数plan_b的话还是沿用Haru.J式CVVC录音表吧**

## 特别鸣谢
科林以及公开的吐表机源码，虽然我没怎么看但是真的是看了科林的吐表机才知道面向对象可以这么用，而且参考了一些参数的设置，比如开头音，最大相同oto数之类的，还有readme文件，部分用词遣句会参考
haru以及其设计的plan_b，全音素来说 plan_b 是神！
雾谷久城听我碎碎念
用于参考粤拼的网站：https://humanum.arts.cuhk.edu.hk/Lexis/lexi-can/

以上任何如有冒犯请联系删除
制作者：cc / QQ: 3471916183
